import{r as y,k,at as v,au as P,av as C,aw as S,j as e,L as h,B as F,b as I,c as L,a as d,C as l}from"./index-UeTnRMFd.js";import{L as q}from"./LogoBox-B1jmRTsl.js";import{P as E}from"./PageTitle-B6CXaB8D.js";import{T as B}from"./ThirdPartyAuth-BwDu486U.js";import{c as u,a as i}from"./index.esm-D5HHW1_A.js";import{P as T}from"./PasswordFormInput-ByfQv_K8.js";import{T as R}from"./TextFormInput-B4BZBKtl.js";import{o as A}from"./yup-Cl1o7vkq.js";import{u as V}from"./index.esm-DpmhBC_O.js";import{s as D}from"./sign-in-DSSvZuYZ.js";const U=()=>{const[o,n]=y.useState(!1),a=k(),{saveSession:g}=v(),[x]=P(),{showNotification:r}=C(),p=new S,j=u({email:i().email("Please enter a valid email").required("Please enter your email"),password:i().required("Please enter your password")}),{control:f,handleSubmit:b}=V({resolver:A(j),defaultValues:{email:"thaicong@gmail.com",password:"thuyen2005"}}),N=()=>{const t=x.get("redirectTo");a(t||"/dashboard?module=admin")},w=b(async t=>{n(!0);try{const s=await p.login(t.email,t.password);if(s.success&&s.data){const{access_token:c,user:m}=s.data;m.role==="admin"?(g({access_token:c,user:m,token:c}),N(),r({message:"Đăng nhập thành công. Đang chuyển hướng...",variant:"success"})):r({message:"Bạn không có quyền truy cập trang admin. Chỉ tài khoản admin mới được phép đăng nhập.",variant:"danger"})}else r({message:s.error||"Đăng nhập không thành công. Vui lòng kiểm tra lại thông tin.",variant:"danger"})}catch(s){r({message:s.message||"Đăng nhập không thành công. Vui lòng thử lại.",variant:"danger"})}finally{n(!1)}});return{loading:o,login:w,control:f}};u({email:i().email("Please enter a valid email").required("please enter your email"),password:i().required("Please enter your password")});const _=()=>{const{loading:o,login:n,control:a}=U();return e.jsxs("form",{onSubmit:n,className:"authentication-form",children:[e.jsx(R,{control:a,name:"email",containerClassName:"mb-3",label:"Email",id:"email-id",placeholder:"Enter your email"}),e.jsx(T,{control:a,name:"password",containerClassName:"mb-3",placeholder:"Enter your password",id:"password-id",label:e.jsxs(e.Fragment,{children:[e.jsx(h,{to:"/auth/reset-pass",className:"float-end text-muted text-unline-dashed ms-1",children:"Reset password"}),e.jsx("label",{className:"form-label",htmlFor:"example-password",children:"Password"})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"checkbox-signin"}),e.jsx("label",{className:"form-check-label",htmlFor:"checkbox-signin",children:"Remember me"})]})}),e.jsx("div",{className:"mb-1 text-center d-grid",children:e.jsx(F,{variant:"primary",type:"submit",disabled:o,children:"Sign In"})})]})},X=()=>e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Sign In"}),e.jsx(I,{className:"auth-card",children:e.jsx(L,{className:"p-0",children:e.jsxs(d,{className:"align-items-center g-0",children:[e.jsx(l,{lg:6,className:"d-none d-lg-inline-block border-end",children:e.jsx("div",{className:"auth-page-sidebar",children:e.jsx("img",{src:D,width:521,height:521,alt:"auth",className:"img-fluid"})})}),e.jsx(l,{lg:6,children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"mx-auto mb-4 text-center auth-logo",children:e.jsx(q,{textLogo:{height:24,width:73},squareLogo:{className:"me-1"},containerClassName:"mx-auto mb-4 text-center auth-logo"})}),e.jsx("h2",{className:"fw-bold text-center fs-18",children:"Sign In"}),e.jsx("p",{className:"text-muted text-center mt-1 mb-4",children:"Enter your email address and password to access admin panel."}),e.jsx(d,{className:"justify-content-center",children:e.jsxs(l,{xs:12,md:8,children:[e.jsx(_,{}),e.jsx(B,{})]})})]})})]})})}),e.jsxs("p",{className:"text-white mb-0 text-center",children:["Don't have an account?",e.jsx(h,{to:"/auth/sign-up",className:"text-white fw-bold ms-1",children:"Sign Up"})]})]});export{X as default};
