import{r as l,k as j,j as e,B as d,t as g}from"./index-BmJdQGgB.js";import{P as f}from"./PageTitle-DvSd9fON.js";import{d as v}from"./dayjs.min-tbsB4tHL.js";const k=()=>{const[t,h]=l.useState([]),[i,r]=l.useState(null),m=new g,x=j(),n=(s,c)=>{r({type:s,text:c}),setTimeout(()=>r(null),1800)};async function u(){try{const s=await m.getAllData();h(s||[])}catch{n("danger","Lấy dữ liệu thất bại")}}l.useEffect(()=>{u()},[]);const a=l.useMemo(()=>({total:t.length,open:t.filter(s=>s.status==="Open").length,pending:t.filter(s=>s.status==="Pending").length,closed:t.filter(s=>s.status==="Closed").length}),[t]),o=s=>{switch(s){case"Open":return"success";case"Pending":return"warning";case"Closed":return"secondary";default:return"light"}};return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Cấu hình",subtitle:"Quản lý ticket hỗ trợ"}),i&&e.jsx("div",{className:"toast-container position-fixed top-0 end-0 p-3",style:{zIndex:1080},children:e.jsx("div",{className:`toast show bg-${i.type} text-white`,children:e.jsx("div",{className:"toast-body fw-semibold",children:i.text})})}),e.jsx("div",{className:"row g-3 mb-3",children:[{label:"Tổng tickets",value:a.total,color:"#6f42c1"},{label:"Đang mở",value:a.open,color:"#16a34a"},{label:"Chờ xử lý",value:a.pending,color:"#f59e0b"},{label:"Đã đóng",value:a.closed,color:"#0ea5e9"}].map((s,c)=>e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"card h-100",children:e.jsxs("div",{className:"card-body d-flex align-items-center gap-3",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:40,height:40,background:"#1f2937"},children:e.jsx("i",{className:"ri ri-ticket-line fs-5",style:{color:s.color}})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small",children:s.label}),e.jsx("div",{className:"fs-4 fw-bold",children:s.value})]})]})})},c))}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("div",{className:"fw-bold",children:"DANH SÁCH YÊU CẦU HỖ TRỢ"}),e.jsxs(d,{size:"sm",variant:"success",onClick:()=>n("info","Tạo ticket mới (demo)"),children:[e.jsx("i",{className:"ri-add-line me-1"})," Ticket mới"]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Tiêu đề"}),e.jsx("th",{children:"Người tạo"}),e.jsx("th",{children:"Trạng thái"}),e.jsx("th",{children:"Cập nhật"}),e.jsx("th",{children:"Thao tác"})]})}),e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",s.id]}),e.jsx("td",{children:s.title}),e.jsxs("td",{children:[s.user.username," ",e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:s.user.email})]}),e.jsx("td",{children:e.jsx("span",{className:`badge bg-${o(s.status)}-subtle text-${o(s.status)}`,children:s.status})}),e.jsx("td",{children:v(s.updatedAt).format("DD/MM/YYYY HH:mm")}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(d,{size:"sm",variant:"success",onClick:()=>x(`/page/ticket/${s.id}?module=admin`),children:"Xem"}),e.jsx(d,{size:"sm",variant:"danger",onClick:()=>n("danger","Đã xoá (demo)"),children:"Xoá"})]})})]},s.id))})]})})]})]})};export{k as default};
